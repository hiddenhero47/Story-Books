<!DOCTYPE html>
<html lang="en">
<head>
    <link href="../fontawesome/css/all.css" />
    <script src="../fontawesome/js/all.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/style2.css">
    <link rel="stylesheet" type="text/css" href="../css/style4.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <title>Story</title>
</head>

<body>

    <header>
        <nav>
            <div class="nav-wrapper container">
                <a href="#" class="hamburger">
                    <i class="fas fa-bars br"></i>
                </a>
                <a href="#!" class="brand-logo center">
                    StoryBooks
                </a>
                <ul class="side-nav mobile-demo">
                    <li>
                        <a href="/stories/stories"> Public Stories</a>
                        <a href="/dashboard"> Dashboard</a>
                        <a href="/auth/logout"> Logout</a>
                    </li>
                </ul>
            </div>
            <div class="over-lay"></div>
        </nav>
    </header>

    <div style="height: 10vh;"></div>

    <div class="box">
        <h1>Stories</h1>
        <div class="row" id="grid"></div>
    </div>

    <div style="height: 30vh;"></div>
    
</body>

<script src="../script/M.sidenav.js"></script>

<script>
    let stories = '#stories#'
    const myGrid = document.getElementById('grid')

const outputAllStories = stories => {
    let storiesHtml;

    if (stories.length > 0) {

        storiesHtml = stories.map(story =>`
        <div class="col s12 m4">
                <div class="card">
                    <div class="card-image">
                        ${story.storIcon}
                    </div>
                    <div class="card-content center-align">
                        <h5>${story.title}</h5>
                        <p> ${story.body} </p>
                        <br>
                        <div class="chip">
                            <div class="image-box">
                                <img src="${story.user.image}" alt="img">
                                </div>
                            <a href="/stories/user/${story.user._id}">${story.user.displayName}</a>
                        </div>
                    </div>
                    <div class="card-action center-aling">
                        <a href="/stories/${story._id}" class="btn grey"> Read More </a>
                    </div>
                </div>
            </div>
        `).join('')

    } else {
        storiesHtml = '<p> No stories to display </p>'
    }

    myGrid.innerHTML = storiesHtml;
}

outputAllStories(stories)
</script>

</html>